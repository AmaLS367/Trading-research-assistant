# –ü—Ä–∞–≤–∏–ª–∞ –∏–º–ø–æ—Ä—Ç–æ–≤ –∏ –≥—Ä–∞—Ñ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π

## –¶–µ–ª—å

–Ø–¥—Ä–æ –Ω–µ –∑–Ω–∞–µ—Ç –ø—Ä–æ –≤–Ω–µ—à–Ω–∏–µ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏. –í–Ω–µ—à–Ω–∏–µ –º–æ–¥—É–ª–∏ –∑–Ω–∞—é—Ç –ø—Ä–æ —è–¥—Ä–æ –∏ —Ä–µ–∞–ª–∏–∑—É—é—Ç –µ–≥–æ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã.

---

## ‚úÖ –†–∞–∑—Ä–µ—à–µ–Ω–Ω—ã–π –æ–±—â–∏–π –≥—Ä–∞—Ñ

```
app -> runtime -> (features, agents, broker_journal, storage, data_providers, news_providers, llm) -> core

core -> —Ç–æ–ª—å–∫–æ stdlib –∏ —Å–≤–æ–∏ –ø–æ–¥–ø–∞–∫–µ—Ç—ã core/*
core/ports -> —Ç–æ–ª—å–∫–æ stdlib
```

---

## üö´ –ó–∞–ø—Ä–µ—â–µ–Ω–Ω—ã–µ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—è

* `core` –ù–ï –∏–º–ø–æ—Ä—Ç–∏—Ä—É–µ—Ç `data_providers`, `news_providers`, `storage`, `llm`, `ui`, `runtime`, `app`
* `features` –ù–ï –∏–º–ø–æ—Ä—Ç–∏—Ä—É–µ—Ç `providers`, `storage`, `runtime`, `app`, `ui`
* `agents` –ù–ï –∏–º–ø–æ—Ä—Ç–∏—Ä—É–µ—Ç `storage`, `runtime`, `app`, `ui`
* `data_providers`, `news_providers`, `llm` –ù–ï –∏–º–ø–æ—Ä—Ç–∏—Ä—É—é—Ç –¥—Ä—É–≥ –¥—Ä—É–≥–∞ –Ω–∞–ø—Ä—è–º—É—é
* `storage` –ù–ï –∏–º–ø–æ—Ä—Ç–∏—Ä—É–µ—Ç `runtime`, `app`, `ui`
* `ui` –ù–ï –∏–º–ø–æ—Ä—Ç–∏—Ä—É–µ—Ç `providers` –Ω–∞–ø—Ä—è–º—É—é (—Ç–æ–ª—å–∫–æ `runtime` –∏ `core.models` –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è)

---

## –ü—Ä–∞–≤–∏–ª–∞ –∏–º–ø–æ—Ä—Ç–æ–≤ –ø–æ –º–æ–¥—É–ª—è–º

### 1) `src/core/` (–¥–æ–º–µ–Ω)

**–ß—Ç–æ –º–æ–∂–µ—Ç –∏–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å:**

* stdlib
* `core.models/*`
* `core.policies/*`
* `core.ports/*`
* `core.services/*`

**–ß—Ç–æ –Ω–µ –º–æ–∂–µ—Ç –∏–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å:**

* –≤—Å—ë –æ—Å—Ç–∞–ª—å–Ω–æ–µ, –≤–∫–ª—é—á–∞—è `features` –∏ `agents`

**–ó–∞—á–µ–º —Ç–∞–∫:**

* `core` –æ—Å—Ç–∞–µ—Ç—Å—è —á–∏—Å—Ç—ã–º –∏ –ø–µ—Ä–µ–Ω–æ—Å–∏–º—ã–º
* –º–µ–Ω—è–µ—à—å –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞ –∏–ª–∏ LLM, `core` –Ω–µ —Ç—Ä–æ–≥–∞–µ—à—å

---

### 2) `src/core/models/`

* –ù–∏–∫–∞–∫–∏—Ö –∏–º–ø–æ—Ä—Ç–æ–≤ –Ω–∞—Ä—É–∂—É
* –ú–∞–∫—Å–∏–º—É–º: stdlib, `typing`, `dataclasses` –∏–ª–∏ `pydantic` (–µ—Å–ª–∏ —Ä–µ—à–∏–º)

---

### 3) `src/core/ports/` (–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã)

**–ß—Ç–æ –∏–º–ø–æ—Ä—Ç–∏—Ä—É–µ—Ç:**

* stdlib
* `core.models` (—Ç–∏–ø—ã –∞—Ä–≥—É–º–µ–Ω—Ç–æ–≤ –∏ –≤–æ–∑–≤—Ä–∞—â–∞–µ–º—ã–µ —Ç–∏–ø—ã)

**–ß—Ç–æ –Ω–µ –∏–º–ø–æ—Ä—Ç–∏—Ä—É–µ—Ç:**

* —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ (`providers`, `storage`, `llm`)

---

### 4) `src/core/services/`

**–ß—Ç–æ –∏–º–ø–æ—Ä—Ç–∏—Ä—É–µ—Ç:**

* `core.models`
* `core.ports`
* `core.policies`

**–ü—Ä–∏–º–µ—Ä –ª–æ–≥–∏–∫–∏:**

* `Orchestrator` –ø—Ä–∏–Ω–∏–º–∞–µ—Ç –ø–æ—Ä—Ç—ã (`MarketDataProvider`, `NewsProvider`, `LlmProvider`, `Storage`) –∏ —Å–≤—è–∑—ã–≤–∞–µ—Ç –ø–∞–π–ø–ª–∞–π–Ω, –Ω–æ –Ω–µ –∑–Ω–∞–µ—Ç –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã—Ö —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–π.

---

### 5) `src/features/`

**–ß—Ç–æ –∏–º–ø–æ—Ä—Ç–∏—Ä—É–µ—Ç:**

* stdlib
* `core.models` (`Candle`, `Timeframe`)
* —Å–≤–æ–∏ –ø–æ–¥–ø–∞–∫–µ—Ç—ã `features/*`

**–ß—Ç–æ –Ω–µ –∏–º–ø–æ—Ä—Ç–∏—Ä—É–µ—Ç:**

* `providers`, `storage`, `agents`, `runtime`

---

### 6) `src/agents/`

**–ß—Ç–æ –∏–º–ø–æ—Ä—Ç–∏—Ä—É–µ—Ç:**

* stdlib
* `core.models` (`Recommendation`, `Rationale`, `DecisionContext`)
* `features.snapshots` (`FeatureSnapshot`)
* `core.ports.llm_provider` (—á—Ç–æ–±—ã –¥–µ—Ä–≥–∞—Ç—å LLM —á–µ—Ä–µ–∑ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å)

**–ß—Ç–æ –Ω–µ –∏–º–ø–æ—Ä—Ç–∏—Ä—É–µ—Ç:**

* `storage` (–∞–≥–µ–Ω—Ç—ã –Ω–µ –ø–∏—à—É—Ç –≤ –ë–î)
* `runtime` (–∞–≥–µ–Ω—Ç—ã –Ω–µ —É–ø—Ä–∞–≤–ª—è—é—Ç —Ü–∏–∫–ª–æ–º)

---

### 7) `src/data_providers/`

**–ß—Ç–æ –∏–º–ø–æ—Ä—Ç–∏—Ä—É–µ—Ç:**

* stdlib
* `core.models` (`Candle`, `Timeframe`)
* `core.ports.market_data_provider` (—á—Ç–æ–±—ã —Ä–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å)
* HTTP –∫–ª–∏–µ–Ω—Ç –∏ —É—Ç–∏–ª–∏—Ç—ã

**–ß—Ç–æ –Ω–µ –∏–º–ø–æ—Ä—Ç–∏—Ä—É–µ—Ç:**

* `features`, `agents`, `runtime`

---

### 8) `src/news_providers/`

**–ß—Ç–æ –∏–º–ø–æ—Ä—Ç–∏—Ä—É–µ—Ç:**

* stdlib
* `core.ports.news_provider`
* —Å–≤–æ–∏ –º–æ–¥–µ–ª–∏ DTO –µ—Å–ª–∏ –Ω—É–∂–Ω—ã, –ª–∏–±–æ `core` —Ç–∏–ø—ã

---

### 9) `src/llm/`

**–ß—Ç–æ –∏–º–ø–æ—Ä—Ç–∏—Ä—É–µ—Ç:**

* stdlib
* `core.ports.llm_provider`
* –∫–ª–∏–µ–Ω—Ç Ollama –∏–ª–∏ —É–¥–∞–ª–µ–Ω–Ω—ã–π HTTP –∫–ª–∏–µ–Ω—Ç

**–í–∞–∂–Ω–æ:**

* –ê–≥–µ–Ω—Ç–∞–º –≤—Å—ë —Ä–∞–≤–Ω–æ, –≥–¥–µ LLM. –û–Ω–∏ –≤–∏–¥—è—Ç —Ç–æ–ª—å–∫–æ `LlmProvider`.

---

### 10) `src/storage/`

**–ß—Ç–æ –∏–º–ø–æ—Ä—Ç–∏—Ä—É–µ—Ç:**

* stdlib
* `core.ports.storage` (–∏–ª–∏ –Ω–∞–±–æ—Ä –ø–æ—Ä—Ç–æ–≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–µ–≤)
* `core.models` (—Ç–∏–ø—ã, –∫–æ—Ç–æ—Ä—ã–µ —Ö—Ä–∞–Ω–∏–º)
* sqlite –¥—Ä–∞–π–≤–µ—Ä—ã –∏ –º–∏–≥—Ä–∞—Ü–∏–∏

**–ß—Ç–æ –Ω–µ –∏–º–ø–æ—Ä—Ç–∏—Ä—É–µ—Ç:**

* `runtime`, `ui`, `providers`

---

### 11) `src/broker_journal/`

**–ß—Ç–æ –∏–º–ø–æ—Ä—Ç–∏—Ä—É–µ—Ç:**

* stdlib
* `core.models` (`JournalEntry`, `Outcome`)
* `core.ports.storage` (—á—Ç–æ–±—ã –ø–∏—Å–∞—Ç—å –∂—É—Ä–Ω–∞–ª –∏ outcomes)

---

### 12) `src/runtime/`

**–ß—Ç–æ –∏–º–ø–æ—Ä—Ç–∏—Ä—É–µ—Ç:**

* `core.services` (`Orchestrator`, `Reporter`, `Scheduler`)
* `core.ports` (–≤—Å–µ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã)
* –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–µ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏: `providers`, `llm`, `storage`, `agents`, `features`
* –Ω–æ `runtime` —ç—Ç–æ –µ–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω–æ–µ –º–µ—Å—Ç–æ, –≥–¥–µ —Ä–∞–∑—Ä–µ—à–µ–Ω–æ —Å–∫–ª–µ–∏–≤–∞—Ç—å —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

---

### 13) `src/ui/`

**–ß—Ç–æ –∏–º–ø–æ—Ä—Ç–∏—Ä—É–µ—Ç:**

* `runtime` (–ø–æ–ª—É—á–∞–µ—Ç –≥–æ—Ç–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ –∏ –∫–æ–º–∞–Ω–¥—ã)
* `core.models` (—Ç–æ–ª—å–∫–æ –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è)

---

### 14) `src/app/`

**–ß—Ç–æ –∏–º–ø–æ—Ä—Ç–∏—Ä—É–µ—Ç:**

* `runtime`
* `wiring`
* `settings`

---

## –ë—ã—Å—Ç—Ä—ã–π —á–µ–∫, —á—Ç–æ–±—ã –Ω–µ –±—ã–ª–æ —Ü–∏–∫–ª–æ–≤

**–ü—Ä–∞–≤–∏–ª–æ 1**

* –í—Å–µ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ –∂–∏–≤—É—Ç –≤–Ω–µ `core` –∏ —Ä–µ–∞–ª–∏–∑—É—é—Ç `core/ports`.

**–ü—Ä–∞–≤–∏–ª–æ 2**

* –õ—é–±–∞—è –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å –Ω–∞ "–≤–Ω–µ—à–Ω–µ–µ" –∏–¥–µ—Ç —Ç–æ–ª—å–∫–æ —á–µ—Ä–µ–∑ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –∏–∑ `core/ports`.

**–ü—Ä–∞–≤–∏–ª–æ 3**

* Wiring —Ç–æ–ª—å–∫–æ –≤ `app` –∏–ª–∏ `runtime`, –Ω–∏–≥–¥–µ –±–æ–ª—å—à–µ.

---

## –ú–∞—Ç—Ä–∏—Ü–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π –ø–æ –º–æ–¥—É–ª—è–º

### core
* –í–Ω–µ—à–Ω–∏–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏: –Ω–µ—Ç (—Ç–æ–ª—å–∫–æ stdlib)

### providers (data_providers, news_providers)
* `httpx` (HTTP –∫–ª–∏–µ–Ω—Ç)
* `tenacity` (retry –ª–æ–≥–∏–∫–∞)

### features
* `pandas`
* `numpy`
* `ta` (—Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä—ã)

### agents
* `core.ports.llm_provider` (–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å)
* –ù–µ –∏–º–ø–æ—Ä—Ç–∏—Ä—É–µ—Ç `llm` –Ω–∞–ø—Ä—è–º—É—é

### llm
* `ollama` (–∫–ª–∏–µ–Ω—Ç)

### storage
* `sqlite3` (stdlib)
* –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ: –¥—Ä–∞–π–≤–µ—Ä—ã –¥–ª—è –º–∏–≥—Ä–∞—Ü–∏–π

### ui
* `rich` (CLI —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ)

### runtime
* –í—Å–µ –≤—ã—à–µ–ø–µ—Ä–µ—á–∏—Å–ª–µ–Ω–Ω—ã–µ (—Å–∫–ª–µ–∏–≤–∞–µ—Ç —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏)

### app
* `pydantic-settings` (–∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è)
