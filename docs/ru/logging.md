# üìù –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

–ü—Ä–æ–µ–∫—Ç –∏—Å–ø–æ–ª—å–∑—É–µ—Ç [loguru](https://github.com/Delgan/loguru) –¥–ª—è –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è. –°–∏—Å—Ç–µ–º–∞ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∞ –¥–ª—è –æ–±–µ—Å–ø–µ—á–µ–Ω–∏—è —á–∏—Ç–∞–µ–º–æ–≥–æ –≤—ã–≤–æ–¥–∞ –≤ –∫–æ–Ω—Å–æ–ª—å –∏ —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è –≤ —Ñ–∞–π–ª—ã —Å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π —Ä–æ—Ç–∞—Ü–∏–µ–π –∏ –º–∞—Å–∫–∏—Ä–æ–≤–∞–Ω–∏–µ–º —Å–µ–∫—Ä–µ—Ç–æ–≤.

## –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

–ù–∞—Å—Ç—Ä–æ–π–∫–∏ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è —É–ø—Ä–∞–≤–ª—è—é—Ç—Å—è —á–µ—Ä–µ–∑ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è –≤ —Ñ–∞–π–ª–µ `.env`:

```env
# –î–∏—Ä–µ–∫—Ç–æ—Ä–∏—è –¥–ª—è –ª–æ–≥-—Ñ–∞–π–ª–æ–≤
LOG_DIR=logs

# –£—Ä–æ–≤–µ–Ω—å –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è –¥–ª—è —Ñ–∞–π–ª–æ–≤
LOG_LEVEL=INFO

# –£—Ä–æ–≤–µ–Ω—å –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è –¥–ª—è –∫–æ–Ω—Å–æ–ª–∏
LOG_CONSOLE_LEVEL=INFO

# –§–æ—Ä–º–∞—Ç –ª–æ–≥–æ–≤ (json|text)
LOG_FORMAT=json

# –†–æ—Ç–∞—Ü–∏—è –ª–æ–≥–æ–≤ (–≤—Ä–µ–º—è –∏–ª–∏ —Ä–∞–∑–º–µ—Ä)
LOG_ROTATION=00:00

# –•—Ä–∞–Ω–µ–Ω–∏–µ —Å—Ç–∞—Ä—ã—Ö –ª–æ–≥–æ–≤
LOG_RETENTION=30 days

# –°–∂–∞—Ç–∏–µ —Å—Ç–∞—Ä—ã—Ö –ª–æ–≥–æ–≤
LOG_COMPRESSION=zip

# –ú–∞—Å–∫–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–µ–∫—Ä–µ—Ç–æ–≤ –≤ –ª–æ–≥–∞—Ö
LOG_MASK_AUTH=true

# –£—Ä–æ–≤–µ–Ω—å –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è –¥–ª—è HTTP –±–∏–±–ª–∏–æ—Ç–µ–∫
LOG_HTTP_LEVEL=WARNING

# –†–∞–∑–¥–µ–ª–µ–Ω–∏–µ –ª–æ–≥–æ–≤ –Ω–∞ –æ—Ç–¥–µ–ª—å–Ω—ã–µ —Ñ–∞–π–ª—ã
LOG_SPLIT_FILES=true

# –í–∫–ª—é—á–∏—Ç—å –æ—Ç–¥–µ–ª—å–Ω—ã–π —Ñ–∞–π–ª –¥–ª—è HTTP –ª–æ–≥–æ–≤
LOG_ENABLE_HTTP_FILE=false
```

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ª–æ–≥–æ–≤

### –ö–æ–Ω—Å–æ–ª—å

–ü–æ —É–º–æ–ª—á–∞–Ω–∏—é –≤ –∫–æ–Ω—Å–æ–ª—å –≤—ã–≤–æ–¥—è—Ç—Å—è —Ç–æ–ª—å–∫–æ –ª–æ–≥–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è —É—Ä–æ–≤–Ω—è INFO –∏ –≤—ã—à–µ. –õ–æ–≥–∏ –±–∏–±–ª–∏–æ—Ç–µ–∫ (httpx, httpcore) —Ñ–∏–ª—å—Ç—Ä—É—é—Ç—Å—è, —á—Ç–æ–±—ã –Ω–µ –∑–∞—Å–æ—Ä—è—Ç—å –≤—ã–≤–æ–¥.

–§–æ—Ä–º–∞—Ç –∫–æ–Ω—Å–æ–ª—å–Ω–æ–≥–æ –≤—ã–≤–æ–¥–∞:
```
2024-01-15 10:30:45 | INFO | src.runtime.orchestrator:run_analysis:123 | Starting analysis for EURUSD
```

–ü—Ä–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏ —Ñ–ª–∞–≥–∞ `--verbose` —É—Ä–æ–≤–µ–Ω—å –∫–æ–Ω—Å–æ–ª–∏ –ø–æ–≤—ã—à–∞–µ—Ç—Å—è –¥–æ DEBUG, –Ω–æ —Ç–æ–ª—å–∫–æ –¥–ª—è –ª–æ–≥–æ–≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è. HTTP –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ –æ—Å—Ç–∞—é—Ç—Å—è –Ω–∞ —É—Ä–æ–≤–Ω–µ WARNING.

### –§–∞–π–ª—ã

–õ–æ–≥–∏ –∑–∞–ø–∏—Å—ã–≤–∞—é—Ç—Å—è –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é, —É–∫–∞–∑–∞–Ω–Ω—É—é –≤ `LOG_DIR` (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é `logs/`).

#### –†–∞–∑–¥–µ–ª—å–Ω—ã–µ —Ñ–∞–π–ª—ã (LOG_SPLIT_FILES=true)

- **app.log** ‚Äî –≤—Å–µ –ª–æ–≥–∏ —É—Ä–æ–≤–Ω—è INFO –∏ –≤—ã—à–µ
- **warnings.log** ‚Äî —Ç–æ–ª—å–∫–æ WARNING –∏ –≤—ã—à–µ
- **errors.log** ‚Äî —Ç–æ–ª—å–∫–æ ERROR –∏ –≤—ã—à–µ
- **http.log** ‚Äî –ª–æ–≥–∏ HTTP –±–∏–±–ª–∏–æ—Ç–µ–∫ (—Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ `LOG_ENABLE_HTTP_FILE=true`)

#### –ï–¥–∏–Ω—ã–π —Ñ–∞–π–ª (LOG_SPLIT_FILES=false)

- **app.log** ‚Äî –≤—Å–µ –ª–æ–≥–∏ —É—Ä–æ–≤–Ω—è, —É–∫–∞–∑–∞–Ω–Ω–æ–≥–æ –≤ `LOG_LEVEL`

–í—Å–µ —Ñ–∞–π–ª–æ–≤—ã–µ –ª–æ–≥–∏ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤ —Ñ–æ—Ä–º–∞—Ç–µ JSON –¥–ª—è —É–¥–æ–±–Ω–æ–≥–æ –ø–∞—Ä—Å–∏–Ω–≥–∞ –∏ –∞–Ω–∞–ª–∏–∑–∞.

## –ú–∞—Å–∫–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–µ–∫—Ä–µ—Ç–æ–≤

–ü—Ä–∏ –≤–∫–ª—é—á–µ–Ω–Ω–æ–º `LOG_MASK_AUTH=true` —Å–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –º–∞—Å–∫–∏—Ä—É–µ—Ç:

- **Authorization –∑–∞–≥–æ–ª–æ–≤–∫–∏**: `Authorization: Bearer sk-...` ‚Üí `Authorization: *****`
- **API –∫–ª—é—á–∏ –≤ URL**: `apiKey=secret123` ‚Üí `apiKey=*****`
- **–ó–Ω–∞—á–µ–Ω–∏—è –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è**: `OPENAI_API_KEY=sk-...` ‚Üí `OPENAI_API_KEY=*****`

–ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è:
- `OPENAI_API_KEY`
- `DEEPSEEK_API_KEY`
- `GOOGLE_API_KEY`
- `HF_TOKEN`
- `HUGGINGFACE_HUB_TOKEN`
- `NEWSAPI_API_KEY`
- `OANDA_API_KEY`
- `TWELVE_DATA_API_KEY`

## –†–æ—Ç–∞—Ü–∏—è –∏ —Ö—Ä–∞–Ω–µ–Ω–∏–µ

- **LOG_ROTATION**: –í—Ä–µ–º—è –∏–ª–∏ —Ä–∞–∑–º–µ—Ä –¥–ª—è —Ä–æ—Ç–∞—Ü–∏–∏ (–Ω–∞–ø—Ä–∏–º–µ—Ä, `00:00` ‚Äî –∫–∞–∂–¥—ã–π –¥–µ–Ω—å –≤ –ø–æ–ª–Ω–æ—á—å, `100 MB` ‚Äî –ø—Ä–∏ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–∏ —Ä–∞–∑–º–µ—Ä–∞)
- **LOG_RETENTION**: –ü–µ—Ä–∏–æ–¥ —Ö—Ä–∞–Ω–µ–Ω–∏—è —Å—Ç–∞—Ä—ã—Ö –ª–æ–≥–æ–≤ (–Ω–∞–ø—Ä–∏–º–µ—Ä, `30 days`, `1 week`)
- **LOG_COMPRESSION**: –§–æ—Ä–º–∞—Ç —Å–∂–∞—Ç–∏—è —Å—Ç–∞—Ä—ã—Ö –ª–æ–≥–æ–≤ (`zip`, `gz`, `tar.gz`)

## –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –≤ –∫–æ–¥–µ

### –°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π logging

–°—É—â–µ—Å—Ç–≤—É—é—â–∏–π –∫–æ–¥, –∏—Å–ø–æ–ª—å–∑—É—é—â–∏–π —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π `logging`, –ø—Ä–æ–¥–æ–ª–∂–∏—Ç —Ä–∞–±–æ—Ç–∞—Ç—å –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π:

```python
import logging
from src.utils.logging import get_logger

logger = get_logger(__name__)
logger.info("Message")
```

–í—Å–µ –∑–∞–ø–∏—Å–∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª—è—é—Ç—Å—è –≤ loguru —á–µ—Ä–µ–∑ `InterceptHandler`.

### –ü—Ä—è–º–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ loguru

–í –Ω–æ–≤—ã—Ö –º–æ–¥—É–ª—è—Ö –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å loguru –Ω–∞–ø—Ä—è–º—É—é:

```python
from loguru import logger

logger.info("Message")
logger.debug("Debug message")
logger.warning("Warning message")
logger.error("Error message")
```

## –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è —à—É–º–∞

–°–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–Ω–∏–∂–∞–µ—Ç —É—Ä–æ–≤–µ–Ω—å –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è –¥–ª—è —à—É–º–Ω—ã—Ö –±–∏–±–ª–∏–æ—Ç–µ–∫:

- `httpx` ‚Äî WARNING
- `httpcore` ‚Äî WARNING
- `urllib3` ‚Äî WARNING
- `asyncio` ‚Äî WARNING

–≠—Ç–∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –ø—Ä–∏–º–µ–Ω—è—é—Ç—Å—è –¥–∞–∂–µ –ø—Ä–∏ `--verbose`, —á—Ç–æ–±—ã –∫–æ–Ω—Å–æ–ª—å –æ—Å—Ç–∞–≤–∞–ª–∞—Å—å —á–∏—Ç–∞–µ–º–æ–π.

## –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### –ë–∞–∑–æ–≤–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

```bash
python src/app/main.py analyze --symbol EURUSD --timeframe 1h
```

–í –∫–æ–Ω—Å–æ–ª—å –≤—ã–≤–æ–¥—è—Ç—Å—è —Ç–æ–ª—å–∫–æ –≤–∞–∂–Ω—ã–µ –ª–æ–≥–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è.

### –ü–æ–¥—Ä–æ–±–Ω—ã–π —Ä–µ–∂–∏–º

```bash
python src/app/main.py analyze --symbol EURUSD --timeframe 1h --verbose
```

–í –∫–æ–Ω—Å–æ–ª—å –≤—ã–≤–æ–¥—è—Ç—Å—è DEBUG –ª–æ–≥–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è, –Ω–æ HTTP –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ –æ—Å—Ç–∞—é—Ç—Å—è –Ω–∞ WARNING.

### –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤

```bash
# –í—Å–µ –ª–æ–≥–∏
cat logs/app.log | jq

# –¢–æ–ª—å–∫–æ –æ—à–∏–±–∫–∏
cat logs/errors.log | jq

# HTTP –ª–æ–≥–∏ (–µ—Å–ª–∏ –≤–∫–ª—é—á–µ–Ω—ã)
cat logs/http.log | jq
```

## –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏

–î–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è:

```env
LOG_LEVEL=DEBUG
LOG_CONSOLE_LEVEL=DEBUG
LOG_SPLIT_FILES=true
LOG_ENABLE_HTTP_FILE=false
```

## –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –¥–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞

–î–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞ —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è:

```env
LOG_LEVEL=INFO
LOG_CONSOLE_LEVEL=WARNING
LOG_SPLIT_FILES=true
LOG_ENABLE_HTTP_FILE=false
LOG_MASK_AUTH=true
LOG_RETENTION=90 days
LOG_COMPRESSION=zip
```
